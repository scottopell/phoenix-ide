*{box-sizing:border-box;margin:0;padding:0}:root{--bg-primary: #0d1117;--bg-secondary: #161b22;--bg-tertiary: #21262d;--text-primary: #e6edf3;--text-secondary: #8b949e;--text-muted: #6e7681;--border-color: #30363d;--accent-blue: #58a6ff;--accent-green: #3fb950;--accent-yellow: #d29922;--accent-red: #f85149;--accent-purple: #a371f7;--state-bar-height: 44px;--breadcrumb-height: 36px;--input-area-height: 60px;--offline-banner-height: 36px;--safe-area-bottom: env(safe-area-inset-bottom, 0px)}html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:16px;line-height:1.5;background:var(--bg-primary);color:var(--text-primary);overflow:hidden}#app{display:flex;flex-direction:column;height:100%;max-height:100vh;max-height:100dvh}#state-bar{position:fixed;top:0;left:0;right:0;height:var(--state-bar-height);background:var(--bg-secondary);border-bottom:1px solid var(--border-color);display:flex;align-items:center;justify-content:space-between;padding:0 12px;z-index:100}#state-indicator{display:flex;align-items:center;gap:8px}.dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}.dot.idle{background:var(--accent-green)}.dot.working{background:var(--accent-yellow);animation:pulse 1.5s infinite}.dot.error{background:var(--accent-red)}.dot.connecting{background:var(--text-muted);animation:pulse 1s infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}#state-text{font-size:13px;color:var(--text-secondary);max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#conversation-info{display:flex;align-items:center;gap:8px}#conv-slug{font-size:13px;color:var(--text-secondary);cursor:pointer}#conv-slug:hover{color:var(--accent-blue)}#breadcrumb-bar{position:fixed;top:var(--state-bar-height);left:0;right:0;height:var(--breadcrumb-height);background:var(--bg-tertiary);border-bottom:1px solid var(--border-color);overflow-x:auto;overflow-y:hidden;white-space:nowrap;z-index:99;-webkit-overflow-scrolling:touch;scrollbar-width:none}#breadcrumb-bar::-webkit-scrollbar{display:none}#breadcrumb-trail{display:inline-flex;align-items:center;height:100%;padding:0 12px;gap:4px}.breadcrumb-item{display:inline-flex;align-items:center;padding:4px 8px;font-size:12px;color:var(--text-secondary);background:var(--bg-secondary);border-radius:4px;cursor:pointer;flex-shrink:0}.breadcrumb-item:hover{background:var(--border-color)}.breadcrumb-item.active{color:var(--accent-blue);background:#58a6ff26}.breadcrumb-item.tool{color:var(--accent-purple)}.breadcrumb-arrow{color:var(--text-muted);font-size:10px;flex-shrink:0}#main-area{flex:1;margin-top:calc(var(--state-bar-height) + var(--breadcrumb-height));margin-bottom:var(--input-area-height);overflow-y:auto;-webkit-overflow-scrolling:touch}.view{display:none;min-height:100%}.view.active{display:block}#conversation-list{padding:16px}.view-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.view-header h2{font-size:20px;font-weight:600}#conv-list{list-style:none}.conv-item{padding:12px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;margin-bottom:8px;cursor:pointer;transition:background .15s}.conv-item:hover{background:var(--bg-tertiary)}.conv-item:active{background:var(--border-color)}.conv-item-slug{font-weight:500;color:var(--text-primary);margin-bottom:4px}.conv-item-meta{font-size:13px;color:var(--text-secondary);display:flex;gap:12px}.conv-item-cwd{color:var(--text-muted);font-family:monospace;font-size:12px;overflow:hidden;text-overflow:ellipsis}#chat-view{padding:16px}#messages{display:flex;flex-direction:column;gap:16px}.message{padding:12px;border-radius:8px;max-width:100%}.message.user{background:var(--bg-tertiary);border:1px solid var(--border-color)}.message.agent{background:var(--bg-secondary)}.message-header{font-size:12px;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.message-content{word-wrap:break-word;overflow-wrap:break-word}.message-content p{margin-bottom:8px}.message-content p:last-child{margin-bottom:0}.message-content pre{background:var(--bg-primary);padding:12px;border-radius:6px;overflow-x:auto;font-size:13px;margin:8px 0}.message-content code{font-family:SF Mono,Monaco,Consolas,monospace;font-size:13px}.message-content code:not(pre code){background:var(--bg-tertiary);padding:2px 6px;border-radius:4px}.tool-group{margin:12px 0;border:1px solid var(--border-color);border-radius:8px;overflow:hidden}.tool-header{display:flex;align-items:center;gap:8px;padding:10px 12px;background:var(--bg-tertiary);cursor:pointer;font-size:13px}.tool-header:hover{background:var(--border-color)}.tool-name{color:var(--accent-purple);font-weight:600}.tool-chevron{margin-left:auto;color:var(--text-muted);transition:transform .15s}.tool-group.expanded .tool-chevron{transform:rotate(90deg)}.tool-body{display:none}.tool-group.expanded .tool-body{display:block}.tool-input{padding:12px;background:var(--bg-primary);font-family:SF Mono,Monaco,Consolas,monospace;font-size:13px;white-space:pre-wrap;word-break:break-all;max-height:200px;overflow-y:auto;border-bottom:1px solid var(--border-color)}.tool-result-section{padding:10px 12px;background:var(--bg-secondary);border-left:3px solid var(--accent-green)}.tool-result-section.error{border-left-color:var(--accent-red)}.tool-result-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--accent-green);margin-bottom:6px}.tool-result-section.error .tool-result-label{color:var(--accent-red)}.tool-truncated{color:var(--text-muted);font-weight:400;text-transform:none;letter-spacing:normal}.tool-result-content{font-family:SF Mono,Monaco,Consolas,monospace;font-size:13px;white-space:pre-wrap;word-break:break-all;max-height:200px;overflow-y:auto;color:var(--text-secondary)}.tool-empty{color:var(--text-muted);font-style:italic}#input-area{position:fixed;bottom:0;left:0;right:0;background:var(--bg-secondary);border-top:1px solid var(--border-color);padding:8px 12px;padding-bottom:calc(8px + var(--safe-area-bottom));z-index:100}#input-container{display:flex;gap:8px;align-items:flex-end}#message-input{flex:1;padding:10px 12px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:16px;font-family:inherit;resize:none;max-height:120px;line-height:1.4}#message-input:focus{outline:none;border-color:var(--accent-blue)}#message-input:disabled{opacity:.6;cursor:not-allowed}#send-btn{padding:10px 16px;background:var(--accent-blue);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;min-width:60px;min-height:44px}#send-btn:hover:not(:disabled){background:#4c9aed}#send-btn:disabled{opacity:.5;cursor:not-allowed}#send-btn.hidden{display:none}#cancel-btn{padding:10px 16px;background:var(--error-color);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;min-width:70px;min-height:44px}#cancel-btn:hover:not(:disabled){background:#d64545}#cancel-btn:disabled{opacity:.5;cursor:not-allowed}#cancel-btn.hidden{display:none}.btn-primary{padding:8px 16px;background:var(--accent-blue);color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;min-height:36px}.btn-primary:hover{background:#4c9aed}.btn-secondary{padding:8px 16px;background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color);border-radius:6px;font-size:14px;cursor:pointer;min-height:36px}.btn-secondary:hover{background:var(--border-color)}#modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:200;padding:16px}#modal-overlay.hidden{display:none}.modal{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:20px;width:100%;max-width:400px}.modal h3{margin-bottom:16px;font-size:18px}.modal label{display:block;font-size:13px;color:var(--text-secondary);margin-bottom:6px}.modal input[type=text]{width:100%;padding:10px 12px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-primary);font-size:14px;font-family:monospace}.modal input[type=text]:focus{outline:none;border-color:var(--accent-blue)}.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.error{color:var(--accent-red);font-size:13px;margin-top:8px}.hidden{display:none!important}.empty-state{text-align:center;padding:40px 20px;color:var(--text-secondary)}.empty-state-icon{font-size:48px;margin-bottom:16px;opacity:.5}.spinner{display:inline-block;width:16px;height:16px;border:2px solid var(--text-muted);border-top-color:var(--accent-blue);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--bg-primary)}::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.subagent-status-block{margin:16px 0;border:1px solid var(--border-color);border-radius:8px;overflow:hidden;background:var(--bg-secondary)}.subagent-header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:var(--bg-tertiary);border-bottom:1px solid var(--border-color)}.subagent-title{font-weight:600;font-size:13px;color:var(--accent-purple)}.subagent-count{font-size:12px;color:var(--text-secondary)}.subagent-list{padding:8px}.subagent-item{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:6px;margin-bottom:4px}.subagent-item:last-child{margin-bottom:0}.subagent-item.pending{background:#d299221a}.subagent-item.completed{background:#3fb9501a}.subagent-icon{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:14px}.subagent-item.completed .subagent-icon{color:var(--accent-green)}.subagent-item.pending .subagent-icon .spinner{width:14px;height:14px;border-width:2px}.subagent-label{flex:1;font-size:13px;color:var(--text-primary)}.subagent-status{font-size:12px;color:var(--text-secondary)}.subagent-item.completed .subagent-status{color:var(--accent-green)}.subagent-item.pending .subagent-status{color:var(--accent-yellow)}.dot.reconnecting{background:var(--accent-yellow);animation:pulse 1s infinite}.dot.offline{background:var(--accent-red)}.dot.reconnected{background:var(--accent-green);animation:pulse-fast .5s ease-out}@keyframes pulse-fast{0%{transform:scale(1)}50%{transform:scale(1.3)}to{transform:scale(1)}}.offline-banner{position:fixed;top:var(--state-bar-height);left:0;right:0;height:var(--offline-banner-height, 36px);background:var(--accent-red);color:#fff;padding:8px 16px;display:flex;align-items:center;gap:8px;font-size:14px;z-index:100;animation:slide-down .2s ease-out}.offline-banner+#breadcrumb-bar,#app:has(.offline-banner) #breadcrumb-bar{top:calc(var(--state-bar-height) + var(--offline-banner-height, 36px))}#app:has(.offline-banner) #main-area{margin-top:calc(var(--state-bar-height) + var(--breadcrumb-height) + var(--offline-banner-height, 36px))}@keyframes slide-down{0%{transform:translateY(-100%);opacity:0}to{transform:translateY(0);opacity:1}}.offline-banner-icon{font-size:16px}.offline-banner-text{flex:1}.message-header{font-size:12px;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center;gap:8px}.message-status{font-size:14px;text-transform:none;letter-spacing:normal}.message-status.sent{color:var(--accent-green)}.message-status.sending{color:var(--text-muted)}.message-status.failed{color:var(--accent-red)}.sending-spinner{display:inline-block;animation:spin 1s linear infinite}.message.user.failed{border-color:var(--accent-red);opacity:.8}.failed-messages{padding:8px 0;border-bottom:1px solid var(--border-color);margin-bottom:8px}.failed-message{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f851491a;border:1px solid var(--accent-red);border-radius:6px;margin-bottom:4px}.failed-message:last-child{margin-bottom:0}.failed-message-icon{font-size:14px}.failed-message-text{flex:1;font-size:13px;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.failed-message-retry{padding:4px 8px;background:var(--accent-red);color:#fff;border:none;border-radius:4px;font-size:12px;font-weight:500;cursor:pointer}.failed-message-retry:hover{background:#d64545}#state-bar-right{display:flex;align-items:center;gap:12px}.context-indicator{display:flex;align-items:center;gap:6px;cursor:help}.context-bar{width:40px;height:6px;background:var(--bg-primary);border-radius:3px;overflow:hidden}.context-fill{height:100%;background:var(--accent-green);border-radius:3px;transition:width .3s ease,background-color .3s ease}.context-indicator.warning .context-fill{background:var(--accent-yellow)}.context-indicator.critical .context-fill{background:var(--accent-red)}.context-label{font-size:11px;color:var(--text-muted);font-variant-numeric:tabular-nums}.context-indicator.warning .context-label{color:var(--accent-yellow)}.context-indicator.critical .context-label{color:var(--accent-red)}
